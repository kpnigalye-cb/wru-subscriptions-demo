"use strict";(self.webpackChunkwru_subscription_modal=self.webpackChunkwru_subscription_modal||[]).push([[49],{49:function(e,t,n){n.r(t);var o=n(5861),r=n(885),c=n(7757),a=n.n(c),i=n(7294),s=n(801),u=n(3526),l=n(1526),w=n(4267),f=n(2937),g=n(6796),I=n(3644),d=n(2215);t.default=function(){var e=(0,d.g)(),t=e.articleId,n=e.category,c=i.useState(null),h=(0,r.Z)(c,2),p=h[0],b=h[1],v=(0,s.l)().successNotification,E=function(){var e=(0,o.Z)(a().mark((function e(o,r){var c,i,s,d,h,E,_,k,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(w.CT).concat(f._F).concat(o));case 3:if(!(c=e.sent)){e.next=25;break}return e.next=7,c.json();case 7:if(i=e.sent,s=i.user,d=s.id,h=s.uid,E=s.loginAt,_=s.email,k=s.username,(0,l.wz)(w.I.JWT_TOKEN,i.jwt),(0,l.wz)(w.I.IS_USER_LOGGED_IN,!0),(0,l.wz)(w.I.EMAIL,_),(0,l.wz)(w.I.USERNAME,k),(0,l.wz)(w.I.USER_ID,d),!E){e.next=23;break}if((0,l.wz)(w.I.UID,h),m=(0,l.Bd)(w.I.LAST_ACTIVE_DATE),(null==E?void 0:E.toString().substring(0,10))===m){e.next=21;break}return e.next=21,(0,u.N)(d);case 21:e.next=25;break;case 23:return e.next=25,(0,u.N)(d,(0,l.Bd)(w.I.UID),(0,l.Bd)(w.I.PUBLISHER_ID));case 25:r&&clearInterval(r),p.close(),(0,I.KG)(t,n),v(g.rO),b(null),setTimeout((function(){window.location.reload()}),2e3),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(0),console.error(e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,n){return e.apply(this,arguments)}}();return i.useEffect((function(){if(p)var e=setInterval((function(){if(p){var t=p.location.href;if(t){var n=new URL(t).search;E(n,e)}}else e&&clearInterval(e)}),1e3)}),[p]),i.createElement("button",{onClick:function(){var e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2.5,n="".concat(w.CT).concat(f.lt),o=window.open(n,"Google Auth","width=".concat(500,",height=").concat(600,",left=").concat(e,",top=").concat(t));b(o)},className:"wru-social-login-buttons wru-google-button"},i.createElement("img",{src:"https://kpnigalye-cb.github.io/wru-subscriptions-images/google-icon.svg",alt:"google-icon",loading:"lazy"}),i.createElement("span",null,"Continue with Google"))}}}]);