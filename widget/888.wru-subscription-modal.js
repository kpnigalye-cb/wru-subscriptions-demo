"use strict";(self.webpackChunkwru_subscription_modal=self.webpackChunkwru_subscription_modal||[]).push([[888],{6888:function(e,t,n){n.r(t);var c=n(5861),o=n(885),r=n(7757),a=n.n(r),i=n(7294),s=n(801),u=n(3526),l=n(1526),w=n(4267),f=n(2937),d=n(6796),I=n(3644),b=n(2215);t.default=function(){var e=(0,b.g)(),t=e.articleId,n=e.category,r=i.useState(null),h=(0,o.Z)(r,2),p=h[0],k=h[1],v=(0,s.l)().successNotification,g=function(){var e=(0,c.Z)(a().mark((function e(c,o){var r,i,s,b,h,g,E,m,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(w.CT).concat(f.V0).concat(c));case 3:if(!(r=e.sent)){e.next=25;break}return e.next=7,r.json();case 7:if(i=e.sent,s=i.user,b=s.id,h=s.uid,g=s.loginAt,E=s.email,m=s.username,(0,l.wz)(w.I.JWT_TOKEN,i.jwt),(0,l.wz)(w.I.IS_USER_LOGGED_IN,!0),(0,l.wz)(w.I.EMAIL,E),(0,l.wz)(w.I.USERNAME,m),(0,l.wz)(w.I.USER_ID,b),!g){e.next=23;break}if((0,l.wz)(w.I.UID,h),_=(0,l.Bd)(w.I.LAST_ACTIVE_DATE),(null==g?void 0:g.toString().substring(0,10))===_){e.next=21;break}return e.next=21,(0,u.N)(b);case 21:e.next=25;break;case 23:return e.next=25,(0,u.N)(b,(0,l.Bd)(w.I.UID),(0,l.Bd)(w.I.PUBLISHER_ID));case 25:o&&clearInterval(o),p.close(),(0,I.KG)(t,n),v(d.rO),k(null),setTimeout((function(){window.location.reload()}),2e3),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(0),console.error(e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,n){return e.apply(this,arguments)}}();return i.useEffect((function(){if(p)var e=setInterval((function(){if(p){var t=p.location.href;if(t){var n=new URL(t).search;n&&g(n,e)}}else e&&clearInterval(e)}),1e3)}),[p]),i.createElement("button",{onClick:function(){var e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2.5,n="".concat(w.CT).concat(f.Y2),c=window.open(n,"Facebook Auth","width=".concat(500,",height=").concat(600,",left=").concat(e,",top=").concat(t));k(c)},className:"wru-social-login-buttons wru-fb-button"},i.createElement("img",{src:"https://kpnigalye-cb.github.io/wru-subscriptions-demo/images/facebook-icon.svg",alt:"facebook-icon",loading:"lazy"}),i.createElement("span",null,"Continue with Facebook"))}}}]);